-- VHDL Entity abc130_driver.tmu_drv_top.symbol
--
-- Created by Matt Warren 2014
--
-- Generated by Mentor Graphics' HDL Designer(TM) 2013.1 (Build 6)
--

library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_arith.all;
use ieee.std_logic_unsigned.all;
library unisim;
use unisim.vcomponents.all;
library utils;
use utils.pkg_types.all;

entity tmu_drv_top is
   port( 
      clk40        : in     std_logic;
      clk80        : in     std_logic;
      coml0_swap_i : in     std_logic;                   -- TWOWIRE *
      hsio_coml0_i : in     std_ulogic;
      rst          : in     std_logic;
      stat_i       : in     slv32_array (127 downto 0);
      strobe40_i   : in     std_logic;
      reg_o        : out    slv32_array (127 downto 0);
      strm_data_o  : out    std_logic                    -- 9 Reg
   );

-- Declarations

end tmu_drv_top ;

-- VHDL from Block Diagram 
-- Generated by Mentor Graphics HDL Designer(TM) 2013.1 (Build 6) 
--
-- abc130_driver.tmu_drv_top.struct
--
-- Created by Matt Warren 2014
--

library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_arith.all;
use ieee.std_logic_unsigned.all;
library unisim;
use unisim.vcomponents.all;
library utils;
use utils.pkg_types.all;


architecture struct of tmu_drv_top is

   -- Architecture declarations

   -- Internal signal declarations
   signal HI     : std_logic;
   signal LO     : std_logic;
   signal ZERO13 : std_logic_vector(12 downto 0);
   signal ZERO16 : std_logic_vector(15 downto 0);
   signal ZERO2  : std_logic_vector(1 downto 0);
   signal ZERO4  : std_logic_vector(3 downto 0);
   signal ZERO8  : std_logic_vector(7 downto 0);
   signal com    : std_ulogic;
   signal ddrtx  : std_logic_vector(1 downto 0);


   -- Component Declarations
   component tmu_too
   generic (
      ABC_ID        : integer := 0;
      HCC_ID        : integer := 0;
      ABC_nHCC_MODE : integer := 0
   );
   port (
      ser_i   : in     std_logic ;
      ddrtx_o : out    std_logic_vector (1 downto 0);
      reg_o   : out    slv32_array (127 downto 0);
      stat_i  : in     slv32_array (127 downto 0);
      clk     : in     std_logic ;
      rst     : in     std_logic 
   );
   end component;
   component demux_ddr
   port (
      q0_o       : out    std_logic ;
      q1_o       : out    std_logic ;
      swap_i     : in     std_logic ;
      d_i        : in     std_logic ;
      strobe1x_i : in     std_logic ;
      clk2x      : in     std_logic ;
      rst        : in     std_logic 
   );
   end component;
   component mux_ddr
   port (
      q0_i       : in     std_logic ;
      q1_i       : in     std_logic ;
      swap_i     : in     std_logic ;
      d_o        : out    std_logic ;
      strobe1x_i : in     std_logic ;
      clk2x      : in     std_logic ;
      rst        : in     std_logic 
   );
   end component;


begin
   -- Architecture concurrent statements
   -- HDL Embedded Text Block 5 eb5
   -- eb3 3
   HI <= '1';
   LO <= '0';
   ZERO2 <=  "00";
   ZERO4 <=  "0000";
   ZERO8 <=  "00000000";
   ZERO13 <= "0000000000000";
   ZERO16 <= "0000000000000000";


   -- Instance port mappings.
   Utmu : tmu_too
      generic map (
         ABC_ID        => 30,
         HCC_ID        => 1,
         ABC_nHCC_MODE => 1
      )
      port map (
         ser_i   => com,
         ddrtx_o => ddrtx,
         reg_o   => reg_o,
         stat_i  => stat_i,
         clk     => clk40,
         rst     => rst
      );
   Uiddr : demux_ddr
      port map (
         q0_o       => com,
         q1_o       => open,
         swap_i     => coml0_swap_i,
         d_i        => hsio_coml0_i,
         strobe1x_i => strobe40_i,
         clk2x      => clk80,
         rst        => rst
      );
   Uoddr : mux_ddr
      port map (
         q0_i       => ddrtx(0),
         q1_i       => ddrtx(1),
         swap_i     => LO,
         d_o        => strm_data_o,
         strobe1x_i => strobe40_i,
         clk2x      => clk80,
         rst        => rst
      );

end struct;
